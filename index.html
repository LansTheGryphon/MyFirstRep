<!DOCTYPE html>
<HTML>
	<HEAD>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script type="text/javascript" src="app.js"></script>
		<link rel="stylesheet" href="app.css" type="text/css" />

	    <TITLE>Знакомство со Шреком</TITLE>
<link rel="stylesheet" href="style.css">
	</HEAD>
	<BODY>
	<h1 align="center" class="shrek_unseen">Кое-что обо мне</h1>
	<p align="center" class="shrek_unseen">Имя: Шрек</p>
	<p id ="target" align="center" class="shrek_unseen">Фамилия: Петров</p>
	    <button onclick="myFunction()">Click me</button>
	    <p id="target"></p>
	 <div class="frame">
      <img src="https://memepedia.ru/wp-content/uploads/2016/08/med_1426704578_00014.jpg" alt="kEk">
    </div>
		 <button class="btn" onclick="MFunction()">Try it</button>
    <script src="script.js">
	    	    function sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
            function MFunction() {
                (async () => {
                    let response = await fetch('https://kav-api.kovalev.team/servodrive/lastActualData?servoDriveId=1');
                    let el = document.getElementById('demo')
                    el.innerHTML = ""
                    let text = await response.text(); // прочитать тело ответа как текст
                    for (const [key, value] of Object.entries(JSON.parse(text)[0])) {
                        const newEl = document.createElement("li")
                        newEl.appendChild(document.createTextNode(`${key}: ${value}`))
                        el.appendChild(newEl)
                        await sleep(100)
                    }
                })()
            }
		</script>
	</BODY>
</HTML>
